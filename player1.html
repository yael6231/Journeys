<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sha'ar HaBitachon Player</title>
<style>
  :root{
    --bg:#fdfaf6; --panel:#fffefb; --text:#333; --muted:#6d6354;
    --border:#ddd6c3; --accent:#8b5cf6; --accent-2:#6366f1;
  }
  html,body{background:var(--bg);color:var(--text);font-family:Georgia,"Times New Roman",serif;margin:0;padding:0}
  .card{background:var(--panel);border:1px solid var(--border);border-radius:14px;box-shadow:0 2px 6px rgba(0,0,0,.05);max-width:900px;margin:20px auto;padding:20px}
  .playlist{padding:8px;max-height:70vh;overflow-y:auto;}
  .track{border-radius:10px;padding:8px;display:flex;align-items:center;cursor:pointer;border:1px solid transparent;}
  .track:hover{background:#faf7ef;border-color:var(--border)}
  .track.active{background:#f6f1e6;border-color:var(--accent)}
  .meta h2{margin:0;color:#4b3f2f;font-weight:700;font-size:1.2em}
  .meta p{margin:4px 0 0;color:var(--muted)}
  audio{width:100%;margin-top:10px}
</style>
</head>
<body>
<div class="card">
  <h1>Sha'ar HaBitachon (Trust in G-d)</h1>
  <audio id="audioPlayer" controls preload="auto"></audio>
  <div class="playlist" id="playlist"></div>
</div>

<script id="tracks-data" type="application/json">
<!-- Paste the ENTIRE playlist array from the fancy-player here -->
</script>

<script>
const audio = document.getElementById('audioPlayer');
const playlistEl = document.getElementById('playlist');
const tracks = JSON.parse(document.getElementById('tracks-data').textContent);
let current = 0;

function loadTrack(index){
  const track = tracks[index];
  audio.src = track.url;
  audio.load();
  [...playlistEl.children].forEach(el => el.classList.remove('active'));
  playlistEl.children[index].classList.add('active');
  audio.play().catch(err => console.log('Autoplay prevented:', err));
}

tracks.forEach((track,i)=>{
  const div = document.createElement('div');
  div.className = 'track';
  div.innerHTML = `<div class="meta"><h2>${track.title}</h2><p>${track.artist}</p></div>`;
  div.addEventListener('click', ()=>{
    current = i;
    loadTrack(current);
  });
  playlistEl.appendChild(div);
});

loadTrack(current);
</script>
</body>
</html>

